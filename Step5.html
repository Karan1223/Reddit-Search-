<!DOCTYPE html>
<html lang="en">
<!-- /*********************************************************************************
* ITC5202 â€“ Project
* I declare that this assignment is my own work in accordance with Humber Academic Policy. 
* No part of this assignment has been copied manually or electronically from any other source
* (including web sites) or distributed to other students.
* 
* Group member Name: Karan Punjabi, Abhi Priyadarshi Student IDs: N01514624, N01513842 Date: 08/09/2022
*
*
********************************************************************************/  -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 5</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        body {
            background-color: antiquewhite;
        }

        h2 {
            color: black;
        }
        table{
            width: 100%;
        }
        th{
            background-color: darkgray;
        }
    </style>
    <script>
        $(document).ready(function () {
            fetch("dataset_p.xml")
                .then(response => response.text())
                .then(str => (new window.DOMParser()).parseFromString(str, "text/xml"))
                .then((data) => {
                    console.log(data);
                    let tables = $("body");
                    tables.append(
                        $("<table id=first border=1><tr>" +
                            "<th colspan=2>Category</th>" +
                            "<th rowspan=2>Updated</th>" +
                            "<th rowspan=2>Icon</th>" +
                            "<th rowspan=2>ID</th>" +
                            "<th colspan=3>Link</th>" +
                            "<th colspan=3>Link</th>" +
                            "<th rowspan=2>Logo</th>" +
                            "<th rowspan=2>Subtitle</th>" +
                            "<th rowspan=2>Title</th></tr>" +
                            "<tr><th>Term</th>" +
                            "<th>Label</th>" +
                            "<th>rel</th>" +
                            "<th>href</th>" +
                            "<th>type</th>" +
                            "<th>rel</th>" +
                            "<th>href</th>" +
                            "<th>type</th></tr>")
                    )
                    let term = data.getElementsByTagName("category")[0].getAttribute("term");
                    let label = data.getElementsByTagName("category")[0].getAttribute("label");
                    let updated = data.getElementsByTagName("updated")[0].innerHTML;
                    let icon = data.getElementsByTagName("icon")[0].innerHTML;
                    let id = data.getElementsByTagName("id")[0].innerHTML;
                    let f_rel = data.getElementsByTagName("link")[0].getAttribute("rel");
                    let f_href = data.getElementsByTagName("link")[0].getAttribute("href");
                    let f_type = data.getElementsByTagName("link")[0].getAttribute("type");
                    let s_rel = data.getElementsByTagName("link")[1].getAttribute("rel");
                    let s_href = data.getElementsByTagName("link")[1].getAttribute("href");
                    let s_type = data.getElementsByTagName("link")[1].getAttribute("type");
                    let logo = data.getElementsByTagName("logo")[0].innerHTML;
                    let subtitle = data.getElementsByTagName("subtitle")[0].innerHTML;
                    let title = data.getElementsByTagName("title")[0].innerHTML;

                    $("#first").append(
                        $("<tr>" +
                            "<td>" + term + "</td>" +
                            "<td>" + label + "</td>" +
                            "<td>" + updated + "</td>" +
                            "<td>" + "<img src='" + icon.slice(0, icon.length - 1) + "'/> " + " </td>" +
                            "<td>" + id + "</td>" +
                            "<td>" + f_rel + "</td>" +
                            "<td>" + f_href + "</td>" +
                            "<td>" + f_type + "</td>" +
                            "<td>" + s_rel + "</td>" +
                            "<td>" + s_href + "</td>" +
                            "<td>" + s_type + "</td>" +
                            "<td>" + "<img src='" + logo + "'/> " + " </td>" +
                            "<td>" + subtitle + "</td>" +
                            "<td>" + title + "</td>" +
                            "</tr>"
                        )
                    )

                    tables.append(
                        $("</table>" + "<br><br>")
                    )

                    tables.append(
                        $("<table id=second border=1><tr>" +
                            "<th colspan=2>Author</th>" +
                            "<th colspan=2>Category</th>" +
                            "<th rowspan=2>Content Type</th>" +
                            "<th rowspan=2>Content</th>" +
                            "<th rowspan=2>ID</th>" +
                            "<th rowspan=2>Link</th>" +
                            "<th rowspan=2>Updated</th>" +
                            "<th rowspan=2>Published</th>" +
                            "<th rowspan=2>Title</th></tr>" +
                            "<tr><th>name</th>" +
                            "<th>uri</th>" +
                            "<th>term</th>" +
                            "<th>label</th>" +
                            "</tr>")
                    )

                    let entrydata = data.getElementsByTagName("entry");
                    for (let i = 0; i < entrydata.length; i++) {
                        $("#second").append(
                            "<tr>" +
                            "<td>" + data.getElementsByTagName("name")[i].innerHTML + "</td>" +
                            "<td>" + data.getElementsByTagName("uri")[i].innerHTML + "</td>" +
                            "<td>" + data.getElementsByTagName("category")[i].getAttribute("term") + "</td>" +
                            "<td>" + data.getElementsByTagName("category")[i].getAttribute("label") + "</td>" +
                            "<td>" + data.getElementsByTagName("content")[i].getAttribute("type") + "</td>" +
                            "<td>" + data.getElementsByTagName("content")[i].innerHTML + "</td>" +
                            "<td>" + data.getElementsByTagName("id")[i].innerHTML + "</td>" +
                            "<td>" + data.getElementsByTagName("link")[i].getAttribute("href") + "</td>" +
                            "<td>" + data.getElementsByTagName("updated")[i].innerHTML + "</td>" +
                            "<td>" + data.getElementsByTagName("published")[i].innerHTML + "</td>" +
                            "<td>" + data.getElementsByTagName("title")[i].innerHTML + "</td>" +
                            "</tr>"
                        )
                    }



                })
        })
    </script>
</head>

<body>
    <h1>XML DATA</h1>
</body>

</html>